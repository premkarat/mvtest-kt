# Overview of mvtest

[mvtest](https://github.com/MontaVista-OpenSourceTechnology/mvtest) is based on [pytest](https://docs.pytest.org/en/latest/) and includes the following standard modules to help perform a full-fledged automated QA on MontaVista Linux distribution.

* [paramiko](http://paramiko.org/) for running commands on remote host.
* [pexpect](http://pexpect.readthedocs.io/) for interactive testing.
* [pytest-html](https://pypi.python.org/pypi/pytest-html) for generating HTML reports.
* [colorlog](https://pypi.python.org/pypi/colorlog) for log formatting with colors in console.
* [ansi2html](https://pypi.python.org/pypi/ansi2html/) Convert text with ANSI color codes to HTML.

# Prerequisite for coding in mvtest

* python - top 3 books to learn python
    * [python Essential Reference 4ed by David Beazley](http://www.dabeaz.com/per.html)
    * [python cookbook by David Beazley](http://www.dabeaz.com/cookbook.html)
    * [Fluent Python by Luciano Ramalho](http://shop.oreilly.com/product/0636920032519.do)
* pytest - learning resources
    * [pytest-doc](https://docs.pytest.org/en/latest/)
    * [quick overview](http://www.pydanny.com/pytest-no-boilerplate-testing.html)
    * [3 hours training on pytest](https://www.youtube.com/watch?v=AiThU6JQbE8)
    * [Advance fixtures training](https://www.youtube.com/watch?v=dYpfIz219vs)
    * [various other talks](http://pytest.org/latest/talks.html)
    * [python testing with pytest](https://pragprog.com/book/bopytest/python-testing-with-pytest)
* most important mvtest APIs
    * [ExpectShell API](https://montavista-opensourcetechnology.github.io/mvtest/_modules/apis/utils.html#ExpectShell) for interactive testing
    * [RemoteMachine API](https://montavista-opensourcetechnology.github.io/mvtest/_modules/apis/utils.html#RemoteMachine) for running commands on remote host
    * [run_cmd API](https://montavista-opensourcetechnology.github.io/mvtest/_modules/apis/utils.html#run_cmd) for running commands locally
    * [get_status_output API](https://montavista-opensourcetechnology.github.io/mvtest/_modules/apis/utils.html#get_status_output) if command exit status and output is needed.
* custom logging levels  
    mvtest uses following [custom logging levels](https://docs.python.org/2/howto/logging.html)  
    * _log.command_ for COMMAND logging
    * _log.texitcode_ for EXIT_CODE logging
    * _log.output_ for OUTPUT logging
    * _log.tpass_ for PASS logging
    * _log.tfail_ for FAIL logging

# mvtest structure and configuration

* **apis**
 >[kernutils](https://montavista-opensourcetechnology.github.io/mvtest/apis.html#module-apis.kernutils) contains commonly used functions for kernel related testing.  
> [netutils](https://montavista-opensourcetechnology.github.io/mvtest/apis.html#module-apis.netutils) contains commonly used functions for network related testing  
>[utils](https://montavista-opensourcetechnology.github.io/mvtest/apis.html#module-apis.utils) contains general purpose utility APIs. This file has ExpectShell, RemoteMachine, run_cmd etc.. API's
* **conftest.py**  
>One of the usecases of conftest is to implement a local plugin. A plugin contains one or multiple hook functions. [writing hook functions](https://docs.pytest.org/en/latest/writing_plugins.html#writinghooks) explains how to write hooks in pytest. We use [pytest_configure](https://docs.pytest.org/en/latest/writing_plugins.html#_pytest.hookspec.pytest_configure) hook to enhance the default HTML report with  additonal environmental details. [How to enhance HTML reports section](https://pypi.python.org/pypi/pytest-html) in pytest-html page has details.
* **docs**  
>This folder contains all the pieces required for documentation generation. mvtest uses [Sphinx](http://www.sphinx-doc.org/en/stable/) for HTML documentation generation. Initial mvtest documentation was generated by following this [Sphinx tutorial](http://www.sphinx-doc.org/en/stable/tutorial.html). The most important files in this directory are  
  
    >1. [Makefile](https://raw.githubusercontent.com/MontaVista-OpenSourceTechnology/mvtest/master/docs/Makefile) used for generating docs using make command. [Makefile options](http://www.sphinx-doc.org/en/stable/invocation.html#makefile-options) section explains customizing Makefile.

    >2. [conf.py](https://raw.githubusercontent.com/premkarat/mvtest/master/docs/conf.py) controls the basics of how sphinx runs when you run a build. For example, mvtest uses [readthedocs](http://readthedocs.org/) theme by specifying the _html_theme_ config parameter. [Basic Configuration](http://www.sphinx-doc.org/en/stable/tutorial.html#basic-configuration) tutorial explains how to modify the conf.py file

    >3. **make <builder>** command is used for building the documentation. [list of available builders](http://www.sphinx-doc.org/en/stable/man/sphinx-build.html) shows the options that can be used with **make** command. mvtest users _make html_ to generate mvtest documentation.

> The **mvtest documentation** sections has detail steps for generating documentation.

* **license.txt**
> Has MIT license information
* **pytest.ini**
> This is the configuration file used by pytest. [Basic test configuration](https://docs.pytest.org/en/latest/customize.html) can be configured usign this file. Various configurations parameters for pytest.ini can be found [here](https://docs.pytest.org/en/latest/customize.html#builtin-configuration-file-options)
* **README.md**
> README file in Markdown format required for github.
* **requirements.txt**
> Has a list of dependency packages, along wth supported versions, required for mvtest to work. Detailed documentation of requirements.txt file can be found [here](https://pip.readthedocs.io/en/1.1/requirements.html)

* **suites**
> This folder has all the tests organized based on various profiles supported by MontaVista Linux distributions.

# mvtest documentation, maintenance & distribution

# mvtest github deployment

# community contributions

# mvtest future enhancements/roadmap
